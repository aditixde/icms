import{c as u,r as n,j as e,B as N,R as k}from"./index-B9bZ70Jv.js";import{S as _,C as M}from"./SectorCard-3h9PrRuI.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=u("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=u("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=u("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),I=()=>{const[l,m]=n.useState([]),[c,g]=n.useState([]),[p,b]=n.useState(!1),[o,j]=n.useState(""),[d,y]=n.useState(50),f=async()=>{if(o.trim()){b(!0);try{const t=new M().simulateAtPrice(d),a={id:Date.now().toString(),name:o,carbon_price:d,custom_targets:{},results:t,created_at:new Date};m(i=>[a,...i]),j(""),y(50)}catch(s){console.error("Error creating scenario:",s)}finally{b(!1)}}},v=s=>{const t={...s,id:Date.now().toString(),name:`${s.name} (Copy)`,created_at:new Date};m(a=>[t,...a])},S=s=>{m(t=>t.filter(a=>a.id!==s)),g(t=>t.filter(a=>a!==a))},C=s=>{g(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s])},w=()=>{const s=l.filter(r=>c.includes(r.id));if(s.length===0)return;const t=k.compareScenarios(s),a=new Blob([t],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");i.href=URL.createObjectURL(a),i.download=`ICMS_Scenario_Comparison_${new Date().toISOString().split("T")[0]}.csv`,i.click()},x=(()=>{const s=l.filter(r=>c.includes(r.id));if(s.length===0)return null;const t=s.reduce((r,h)=>r+h.results.carbon_price,0)/s.length,a=s.reduce((r,h)=>r+h.results.total_emissions_reduced,0)/s.length,i=Math.max(...s.map(r=>r.results.carbon_price))-Math.min(...s.map(r=>r.results.carbon_price));return{avgPrice:t,avgEmissions:a,priceRange:i}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Scenario Comparison"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create and compare multiple carbon pricing scenarios"})]}),c.length>0&&e.jsxs("button",{onClick:w,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{children:"Export Comparison"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create New Scenario"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scenario Name"}),e.jsx("input",{type:"text",value:o,onChange:s=>j(s.target.value),placeholder:"e.g., High Carbon Price Policy",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Carbon Price: ₹",d,"/tCO₂"]}),e.jsx("input",{type:"range",min:"0",max:"200",value:d,onChange:s=>y(Number(s.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),e.jsxs("button",{onClick:f,disabled:p||!o.trim(),className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{children:p?"Creating...":"Create Scenario"})]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:x&&c.length>1&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-3",children:"Comparison Summary"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-blue-700",children:"Avg. Carbon Price"}),e.jsxs("div",{className:"text-xl font-semibold text-blue-900",children:["₹",x.avgPrice.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-blue-700",children:"Avg. Emissions Reduced"}),e.jsxs("div",{className:"text-xl font-semibold text-blue-900",children:[x.avgEmissions.toFixed(2)," Mt"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-blue-700",children:"Price Range"}),e.jsxs("div",{className:"text-xl font-semibold text-blue-900",children:["₹",x.priceRange.toFixed(2)]})]})]})]})})]})]}),l.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[e.jsx(N,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Scenarios Created"}),e.jsx("p",{className:"text-gray-600",children:"Create your first scenario above to start comparing different carbon pricing policies."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:l.map(s=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:c.includes(s.id),onChange:()=>C(s.id),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:s.name})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>v(s),className:"p-1 text-gray-500 hover:text-blue-600 transition-colors",title:"Duplicate scenario",children:e.jsx(P,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>S(s.id),className:"p-1 text-gray-500 hover:text-red-600 transition-colors",title:"Delete scenario",children:e.jsx(R,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Carbon Price:"}),e.jsxs("span",{className:"font-medium",children:["₹",s.results.carbon_price.toFixed(2),"/tCO₂"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Emissions Reduced:"}),e.jsxs("span",{className:"font-medium",children:[s.results.total_emissions_reduced.toFixed(2)," Mt"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Market Balance:"}),e.jsxs("span",{className:"font-medium",children:[s.results.total_ccc_supply.toFixed(2)," Mt"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Created:"}),e.jsx("span",{className:"font-medium",children:s.created_at.toLocaleDateString()})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Sector Positions"}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-red-600",children:[s.results.sectors.filter(t=>t.net_position==="Buyer").length," Buyers"]}),e.jsxs("span",{className:"text-gray-600",children:[s.results.sectors.filter(t=>t.net_position==="Neutral").length," Neutral"]}),e.jsxs("span",{className:"text-green-600",children:[s.results.sectors.filter(t=>t.net_position==="Seller").length," Sellers"]})]})]})]},s.id))}),c.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Selected Scenarios Detailed View"}),l.filter(s=>c.includes(s.id)).map(s=>e.jsxs("div",{className:"mb-8 last:mb-0",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:s.name}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.results.sectors.slice(0,6).map(t=>e.jsx(_,{result:t,isCompact:!0},t.sector))})]},s.id))]})]})};export{I as ScenarioComparison};
