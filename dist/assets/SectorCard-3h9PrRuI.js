import{c as m,j as i}from"./index-B9bZ70Jv.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=m("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=m("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=m("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=m("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),A={Steel:{emissions:297,production:120,intensity:2.48,target:2.25},Aluminium:{emissions:77,production:3.6,intensity:20.88,target:18.79},Cement:{emissions:218,production:337,intensity:.65,target:.59},Fertiliser:{emissions:25,production:43,intensity:.58,target:.52},Textile:{emissions:25,production:9.5,intensity:2.63,target:2.37},"Paper & Pulp":{emissions:30.5,production:19.3,intensity:1.58,target:1.4},Petrochemicals:{emissions:94.87,production:26.5,intensity:3.58,target:3.22},"Petroleum Refining":{emissions:70,production:243,intensity:.28,target:.25},"Chlor Alkali":{emissions:12,production:4.54,intensity:2.63,target:2.36}},C={Steel:{fixed_cost:17500,variable_cost:4e4,price:62500},Aluminium:{fixed_cost:7e4,variable_cost:14e4,price:23e4},Cement:{fixed_cost:1400,variable_cost:4100,price:6e3},Fertiliser:{fixed_cost:5e3,variable_cost:18e3,price:25e3},Textile:{fixed_cost:6e4,variable_cost:155e3,price:25e4},"Paper & Pulp":{fixed_cost:17500,variable_cost:4e4,price:62500},Petrochemicals:{fixed_cost:25e3,variable_cost:7e4,price:105e3},"Petroleum Refining":{fixed_cost:2e4,variable_cost:6e4,price:9e4},"Chlor Alkali":{fixed_cost:12e3,variable_cost:2e4,price:35e3}},D={Steel:.4,Aluminium:.35,Cement:.25,Fertiliser:.3,Textile:.45,"Paper & Pulp":.4,Petrochemicals:.35,"Petroleum Refining":.2,"Chlor Alkali":.3},V=50,g=1e-4,N=100;class H{constructor(t){this.sectoralData=A,this.costData=C,this.elasticityMap=D,this.k=V,t&&(this.sectoralData={...this.sectoralData},Object.entries(t).forEach(([s,n])=>{this.sectoralData[s]&&(this.sectoralData[s]={...this.sectoralData[s],target:n})}))}updateSectoralData(t){this.sectoralData={...t}}updateCostData(t){this.costData={...t}}updateElasticityData(t){this.elasticityMap={...t}}simulateAtPrice(t){const s=[];let n=0,o=0;return Object.entries(this.sectoralData).forEach(([e,c])=>{const r=this.costData[e],d=this.elasticityMap[e],l=t,x=c.intensity,j=c.target,_=c.production,y=r.price,f=r.variable_cost,w=d,T=this.k,p=Math.max(0,x-l/(2*T)),k=y-f-l*(p-j)+l*(x-p),h=Math.max(0,_+w*k/1e3),u=(j-p)*h,v=(x-p)*h,P=_*y-_*f-r.fixed_cost,S=h*y,E=h*f,R=Math.max(0,-u)*l,F=Math.max(0,u)*l,M=S-E-r.fixed_cost-R+F,I=M-P;let b="Neutral";u>1?b="Seller":u<-1&&(b="Buyer"),s.push({sector:e,baseline_intensity:x,new_intensity:p,baseline_production:_,adjusted_production:h,emissions_reduced:v,ccc_balance:u,net_position:b,profit_change:I/1e6,total_profit:M/1e6}),n+=v,o+=u}),{carbon_price:t,sectors:s,total_emissions_reduced:n,total_ccc_supply:o,equilibrium_found:Math.abs(o)<g}}findEquilibriumPrice(t=0,s=200){let n=0;const o=g;let e;const c=this.simulateAtPrice(t),r=this.simulateAtPrice(s);if(c.total_ccc_supply*r.total_ccc_supply>0)return e=this.simulateAtPrice((t+s)/2),e.equilibrium_found=!1,e.iterations=n,e;for(;s-t>o&&n<N;){const d=(t+s)/2;if(e=this.simulateAtPrice(d),Math.abs(e.total_ccc_supply)<o)return e.equilibrium_found=!0,e.iterations=n,e;e.total_ccc_supply>0?s=d:t=d,n++}return e=this.simulateAtPrice((t+s)/2),e.equilibrium_found=Math.abs(e.total_ccc_supply)<o,e.iterations=n,e}async findEquilibriumWithTracking(t=0,s=200){let n=0;const o=g,e=[];let c;const r=this.simulateAtPrice(t),d=this.simulateAtPrice(s);if(e.push({iteration:0,price:t,balance:r.total_ccc_supply}),e.push({iteration:1,price:s,balance:d.total_ccc_supply}),r.total_ccc_supply*d.total_ccc_supply>0)return c=this.simulateAtPrice((t+s)/2),c.equilibrium_found=!1,c.iterations=n,{result:c,convergenceData:e};for(;s-t>o&&n<N;){const l=(t+s)/2;if(c=this.simulateAtPrice(l),e.push({iteration:n+2,price:l,balance:c.total_ccc_supply}),Math.abs(c.total_ccc_supply)<o)return c.equilibrium_found=!0,c.iterations=n,{result:c,convergenceData:e};c.total_ccc_supply>0?s=l:t=l,n++}return c=this.simulateAtPrice((t+s)/2),c.equilibrium_found=Math.abs(c.total_ccc_supply)<o,c.iterations=n,{result:c,convergenceData:e}}updateTargets(t){Object.entries(t).forEach(([s,n])=>{this.sectoralData[s]&&(this.sectoralData[s]={...this.sectoralData[s],target:n})})}resetToDefaults(){this.sectoralData={...A},this.costData={...C},this.elasticityMap={...D}}}const Q=({result:a,isCompact:t=!1})=>{const s=r=>{switch(r){case"Seller":return"text-green-600 bg-green-50";case"Buyer":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},o=(r=>{switch(r){case"Seller":return L;case"Buyer":return B;default:return q}})(a.net_position),e=(a.baseline_intensity-a.new_intensity)/a.baseline_intensity*100,c=(a.adjusted_production-a.baseline_production)/a.baseline_production*100;return i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:i.jsx(O,{className:"h-5 w-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:a.sector}),i.jsxs("div",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${s(a.net_position)}`,children:[i.jsx(o,{className:"h-3 w-3"}),i.jsx("span",{children:a.net_position})]})]})]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Emissions Intensity"}),i.jsxs("p",{className:"text-sm font-medium",children:[a.new_intensity.toFixed(3)," tCO₂/unit"]}),i.jsxs("p",{className:"text-xs text-gray-600",children:[e>0?"↓":"↑"," ",Math.abs(e).toFixed(1),"%"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Production"}),i.jsxs("p",{className:"text-sm font-medium",children:[a.adjusted_production.toFixed(1)," units"]}),i.jsxs("p",{className:"text-xs text-gray-600",children:[c>0?"↑":"↓"," ",Math.abs(c).toFixed(1),"%"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"CCC Balance"}),i.jsxs("p",{className:`text-sm font-medium ${a.ccc_balance>0?"text-green-600":a.ccc_balance<0?"text-red-600":"text-gray-600"}`,children:[a.ccc_balance>0?"+":"",a.ccc_balance.toFixed(2)," Mt"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Profit Impact"}),i.jsxs("p",{className:`text-sm font-medium ${a.profit_change>0?"text-green-600":a.profit_change<0?"text-red-600":"text-gray-600"}`,children:[a.profit_change>0?"+":"","₹",a.profit_change.toFixed(1),"M"]})]})]}),!t&&i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:i.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[i.jsxs("div",{children:["Emissions Reduced: ",a.emissions_reduced.toFixed(2)," Mt CO₂"]}),i.jsxs("div",{children:["Total Profit: ₹",a.total_profit.toFixed(1),"M"]})]})})]})};export{H as C,D as E,Q as S,B as T,A as a,C as b,L as c};
